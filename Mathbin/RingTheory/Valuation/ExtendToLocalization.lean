/-
Copyright (c) 2022 Adam Topaz. All rights reserved.
Released under Apache 2.0 license as described in the file LICENSE.
Authors: Adam Topaz

! This file was ported from Lean 3 source module ring_theory.valuation.extend_to_localization
! leanprover-community/mathlib commit 1b0a28e1c93409dbf6d69526863cd9984ef652ce
! Please do not edit these lines, except to modify the commit id
! if you have ported upstream changes.
-/
import Mathbin.RingTheory.Localization.AtPrime
import Mathbin.RingTheory.Valuation.Basic

/-!

# Extending valuations to a localization

> THIS FILE IS SYNCHRONIZED WITH MATHLIB4.
> Any changes to this file require a corresponding PR to mathlib4.

We show that, given a valuation `v` taking values in a linearly ordered commutative *group*
with zero `Γ`, and a submonoid `S` of `v.supp.prime_compl`, the valuation `v` can be naturally
extended to the localization `S⁻¹A`.

-/


variable {A : Type _} [CommRing A] {Γ : Type _} [LinearOrderedCommGroupWithZero Γ]
  (v : Valuation A Γ) {S : Submonoid A} (hS : S ≤ v.supp.primeCompl) (B : Type _) [CommRing B]
  [Algebra A B] [IsLocalization S B]

/- warning: valuation.extend_to_localization -> Valuation.extendToLocalization is a dubious translation:
lean 3 declaration is
  forall {A : Type.{u1}} [_inst_1 : CommRing.{u1} A] {Γ : Type.{u2}} [_inst_2 : LinearOrderedCommGroupWithZero.{u2} Γ] (v : Valuation.{u1, u2} A Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2) (CommRing.toRing.{u1} A _inst_1)) {S : Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (NonAssocRing.toNonAssocSemiring.{u1} A (Ring.toNonAssocRing.{u1} A (CommRing.toRing.{u1} A _inst_1)))))}, (LE.le.{u1} (Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (NonAssocRing.toNonAssocSemiring.{u1} A (Ring.toNonAssocRing.{u1} A (CommRing.toRing.{u1} A _inst_1)))))) (Preorder.toHasLe.{u1} (Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (NonAssocRing.toNonAssocSemiring.{u1} A (Ring.toNonAssocRing.{u1} A (CommRing.toRing.{u1} A _inst_1)))))) (PartialOrder.toPreorder.{u1} (Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (NonAssocRing.toNonAssocSemiring.{u1} A (Ring.toNonAssocRing.{u1} A (CommRing.toRing.{u1} A _inst_1)))))) (CompleteSemilatticeInf.toPartialOrder.{u1} (Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (NonAssocRing.toNonAssocSemiring.{u1} A (Ring.toNonAssocRing.{u1} A (CommRing.toRing.{u1} A _inst_1)))))) (CompleteLattice.toCompleteSemilatticeInf.{u1} (Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (NonAssocRing.toNonAssocSemiring.{u1} A (Ring.toNonAssocRing.{u1} A (CommRing.toRing.{u1} A _inst_1)))))) (Submonoid.completeLattice.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (NonAssocRing.toNonAssocSemiring.{u1} A (Ring.toNonAssocRing.{u1} A (CommRing.toRing.{u1} A _inst_1)))))))))) S (Ideal.primeCompl.{u1} A (CommRing.toCommSemiring.{u1} A _inst_1) (Valuation.supp.{u1, u2} A Γ _inst_1 (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2) v) (Valuation.extendToLocalization._proof_1.{u1, u2} A _inst_1 Γ _inst_2 v))) -> (forall (B : Type.{u3}) [_inst_3 : CommRing.{u3} B] [_inst_4 : Algebra.{u1, u3} A B (CommRing.toCommSemiring.{u1} A _inst_1) (Ring.toSemiring.{u3} B (CommRing.toRing.{u3} B _inst_3))] [_inst_5 : IsLocalization.{u1, u3} A (CommRing.toCommSemiring.{u1} A _inst_1) S B (CommRing.toCommSemiring.{u3} B _inst_3) _inst_4], Valuation.{u3, u2} B Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2) (CommRing.toRing.{u3} B _inst_3))
but is expected to have type
  forall {A : Type.{u1}} [_inst_1 : CommRing.{u1} A] {Γ : Type.{u2}} [_inst_2 : LinearOrderedCommGroupWithZero.{u2} Γ] (v : Valuation.{u1, u2} A Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2) (CommRing.toRing.{u1} A _inst_1)) {S : Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (Semiring.toNonAssocSemiring.{u1} A (CommSemiring.toSemiring.{u1} A (CommRing.toCommSemiring.{u1} A _inst_1)))))}, (LE.le.{u1} (Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (Semiring.toNonAssocSemiring.{u1} A (CommSemiring.toSemiring.{u1} A (CommRing.toCommSemiring.{u1} A _inst_1)))))) (Preorder.toLE.{u1} (Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (Semiring.toNonAssocSemiring.{u1} A (CommSemiring.toSemiring.{u1} A (CommRing.toCommSemiring.{u1} A _inst_1)))))) (PartialOrder.toPreorder.{u1} (Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (Semiring.toNonAssocSemiring.{u1} A (CommSemiring.toSemiring.{u1} A (CommRing.toCommSemiring.{u1} A _inst_1)))))) (OmegaCompletePartialOrder.toPartialOrder.{u1} (Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (Semiring.toNonAssocSemiring.{u1} A (CommSemiring.toSemiring.{u1} A (CommRing.toCommSemiring.{u1} A _inst_1)))))) (CompleteLattice.instOmegaCompletePartialOrder.{u1} (Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (Semiring.toNonAssocSemiring.{u1} A (CommSemiring.toSemiring.{u1} A (CommRing.toCommSemiring.{u1} A _inst_1)))))) (Submonoid.instCompleteLatticeSubmonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (Semiring.toNonAssocSemiring.{u1} A (CommSemiring.toSemiring.{u1} A (CommRing.toCommSemiring.{u1} A _inst_1)))))))))) S (Ideal.primeCompl.{u1} A (CommRing.toCommSemiring.{u1} A _inst_1) (Valuation.supp.{u1, u2} A Γ _inst_1 (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2) v) (Valuation.instIsPrimeToSemiringToCommSemiringSupp.{u1, u2} A Γ _inst_1 (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2) v (LinearOrderedCommGroupWithZero.toNontrivial.{u2} Γ _inst_2) (GroupWithZero.noZeroDivisors.{u2} Γ (CommGroupWithZero.toGroupWithZero.{u2} Γ (LinearOrderedCommGroupWithZero.toCommGroupWithZero.{u2} Γ _inst_2)))))) -> (forall (B : Type.{u3}) [_inst_3 : CommRing.{u3} B] [_inst_4 : Algebra.{u1, u3} A B (CommRing.toCommSemiring.{u1} A _inst_1) (CommSemiring.toSemiring.{u3} B (CommRing.toCommSemiring.{u3} B _inst_3))] [_inst_5 : IsLocalization.{u1, u3} A (CommRing.toCommSemiring.{u1} A _inst_1) S B (CommRing.toCommSemiring.{u3} B _inst_3) _inst_4], Valuation.{u3, u2} B Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2) (CommRing.toRing.{u3} B _inst_3))
Case conversion may be inaccurate. Consider using '#align valuation.extend_to_localization Valuation.extendToLocalizationₓ'. -/
/-- We can extend a valuation `v` on a ring to a localization at a submonoid of
the complement of `v.supp`. -/
noncomputable def Valuation.extendToLocalization : Valuation B Γ :=
  let f := IsLocalization.toLocalizationMap S B
  let h : ∀ s : S, IsUnit (v.1.toMonoidHom s) := fun s => isUnit_iff_ne_zero.2 (hS s.2)
  { f.lift h with
    map_zero' := by convert f.lift_eq _ 0 <;> simp
    map_add_le_max' := fun x y =>
      by
      obtain ⟨a, b, s, rfl, rfl⟩ : ∃ (a b : A)(s : S), f.mk' a s = x ∧ f.mk' b s = y :=
        by
        obtain ⟨a, s, rfl⟩ := f.mk'_surjective x
        obtain ⟨b, t, rfl⟩ := f.mk'_surjective y
        use a * t, b * s, s * t
        constructor <;>
          · rw [f.mk'_eq_iff_eq, Submonoid.coe_mul]
            ring_nf
      convert_to f.lift h (f.mk' (a + b) s) ≤ max (f.lift h _) (f.lift h _)
      · refine' congr_arg (f.lift h) (IsLocalization.eq_mk'_iff_mul_eq.2 _)
        rw [add_mul, map_add]
        iterate 2 erw [IsLocalization.mk'_spec]
      iterate 3 rw [f.lift_mk']
      rw [max_mul_mul_right]
      apply mul_le_mul_right' (v.map_add a b) }
#align valuation.extend_to_localization Valuation.extendToLocalization

/- warning: valuation.extend_to_localization_apply_map_apply -> Valuation.extendToLocalization_apply_map_apply is a dubious translation:
lean 3 declaration is
  forall {A : Type.{u1}} [_inst_1 : CommRing.{u1} A] {Γ : Type.{u2}} [_inst_2 : LinearOrderedCommGroupWithZero.{u2} Γ] (v : Valuation.{u1, u2} A Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2) (CommRing.toRing.{u1} A _inst_1)) {S : Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (NonAssocRing.toNonAssocSemiring.{u1} A (Ring.toNonAssocRing.{u1} A (CommRing.toRing.{u1} A _inst_1)))))} (hS : LE.le.{u1} (Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (NonAssocRing.toNonAssocSemiring.{u1} A (Ring.toNonAssocRing.{u1} A (CommRing.toRing.{u1} A _inst_1)))))) (Preorder.toHasLe.{u1} (Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (NonAssocRing.toNonAssocSemiring.{u1} A (Ring.toNonAssocRing.{u1} A (CommRing.toRing.{u1} A _inst_1)))))) (PartialOrder.toPreorder.{u1} (Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (NonAssocRing.toNonAssocSemiring.{u1} A (Ring.toNonAssocRing.{u1} A (CommRing.toRing.{u1} A _inst_1)))))) (CompleteSemilatticeInf.toPartialOrder.{u1} (Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (NonAssocRing.toNonAssocSemiring.{u1} A (Ring.toNonAssocRing.{u1} A (CommRing.toRing.{u1} A _inst_1)))))) (CompleteLattice.toCompleteSemilatticeInf.{u1} (Submonoid.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (NonAssocRing.toNonAssocSemiring.{u1} A (Ring.toNonAssocRing.{u1} A (CommRing.toRing.{u1} A _inst_1)))))) (Submonoid.completeLattice.{u1} A (MulZeroOneClass.toMulOneClass.{u1} A (NonAssocSemiring.toMulZeroOneClass.{u1} A (NonAssocRing.toNonAssocSemiring.{u1} A (Ring.toNonAssocRing.{u1} A (CommRing.toRing.{u1} A _inst_1)))))))))) S (Ideal.primeCompl.{u1} A (CommRing.toCommSemiring.{u1} A _inst_1) (Valuation.supp.{u1, u2} A Γ _inst_1 (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2) v) (Valuation.supp.Ideal.isPrime.{u1, u2} A Γ _inst_1 (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2) v (GroupWithZero.to_nontrivial.{u2} Γ (CommGroupWithZero.toGroupWithZero.{u2} Γ (LinearOrderedCommGroupWithZero.toCommGroupWithZero.{u2} Γ _inst_2))) (GroupWithZero.noZeroDivisors.{u2} Γ (CommGroupWithZero.toGroupWithZero.{u2} Γ (LinearOrderedCommGroupWithZero.toCommGroupWithZero.{u2} Γ _inst_2)))))) (B : Type.{u3}) [_inst_3 : CommRing.{u3} B] [_inst_4 : Algebra.{u1, u3} A B (CommRing.toCommSemiring.{u1} A _inst_1) (Ring.toSemiring.{u3} B (CommRing.toRing.{u3} B _inst_3))] [_inst_5 : IsLocalization.{u1, u3} A (CommRing.toCommSemiring.{u1} A _inst_1) S B (CommRing.toCommSemiring.{u3} B _inst_3) _inst_4] (a : A), Eq.{succ u2} Γ (coeFn.{max (succ u3) (succ u2), max (succ u3) (succ u2)} (Valuation.{u3, u2} B Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2) (CommRing.toRing.{u3} B _inst_3)) (fun (_x : Valuation.{u3, u2} B Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2) (CommRing.toRing.{u3} B _inst_3)) => B -> Γ) (Valuation.hasCoeToFun.{u3, u2} B Γ (CommRing.toRing.{u3} B _inst_3) (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2)) (Valuation.extendToLocalization.{u1, u2, u3} A _inst_1 Γ _inst_2 v S hS B _inst_3 _inst_4 _inst_5) (coeFn.{max (succ u1) (succ u3), max (succ u1) (succ u3)} (RingHom.{u1, u3} A B (Semiring.toNonAssocSemiring.{u1} A (CommSemiring.toSemiring.{u1} A (CommRing.toCommSemiring.{u1} A _inst_1))) (Semiring.toNonAssocSemiring.{u3} B (Ring.toSemiring.{u3} B (CommRing.toRing.{u3} B _inst_3)))) (fun (_x : RingHom.{u1, u3} A B (Semiring.toNonAssocSemiring.{u1} A (CommSemiring.toSemiring.{u1} A (CommRing.toCommSemiring.{u1} A _inst_1))) (Semiring.toNonAssocSemiring.{u3} B (Ring.toSemiring.{u3} B (CommRing.toRing.{u3} B _inst_3)))) => A -> B) (RingHom.hasCoeToFun.{u1, u3} A B (Semiring.toNonAssocSemiring.{u1} A (CommSemiring.toSemiring.{u1} A (CommRing.toCommSemiring.{u1} A _inst_1))) (Semiring.toNonAssocSemiring.{u3} B (Ring.toSemiring.{u3} B (CommRing.toRing.{u3} B _inst_3)))) (algebraMap.{u1, u3} A B (CommRing.toCommSemiring.{u1} A _inst_1) (Ring.toSemiring.{u3} B (CommRing.toRing.{u3} B _inst_3)) _inst_4) a)) (coeFn.{max (succ u1) (succ u2), max (succ u1) (succ u2)} (Valuation.{u1, u2} A Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2) (CommRing.toRing.{u1} A _inst_1)) (fun (_x : Valuation.{u1, u2} A Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2) (CommRing.toRing.{u1} A _inst_1)) => A -> Γ) (Valuation.hasCoeToFun.{u1, u2} A Γ (CommRing.toRing.{u1} A _inst_1) (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u2} Γ _inst_2)) v a)
but is expected to have type
  forall {A : Type.{u2}} [_inst_1 : CommRing.{u2} A] {Γ : Type.{u3}} [_inst_2 : LinearOrderedCommGroupWithZero.{u3} Γ] (v : Valuation.{u2, u3} A Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2) (CommRing.toRing.{u2} A _inst_1)) {S : Submonoid.{u2} A (MulZeroOneClass.toMulOneClass.{u2} A (NonAssocSemiring.toMulZeroOneClass.{u2} A (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1)))))} (hS : LE.le.{u2} (Submonoid.{u2} A (MulZeroOneClass.toMulOneClass.{u2} A (NonAssocSemiring.toMulZeroOneClass.{u2} A (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1)))))) (Preorder.toLE.{u2} (Submonoid.{u2} A (MulZeroOneClass.toMulOneClass.{u2} A (NonAssocSemiring.toMulZeroOneClass.{u2} A (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1)))))) (PartialOrder.toPreorder.{u2} (Submonoid.{u2} A (MulZeroOneClass.toMulOneClass.{u2} A (NonAssocSemiring.toMulZeroOneClass.{u2} A (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1)))))) (OmegaCompletePartialOrder.toPartialOrder.{u2} (Submonoid.{u2} A (MulZeroOneClass.toMulOneClass.{u2} A (NonAssocSemiring.toMulZeroOneClass.{u2} A (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1)))))) (CompleteLattice.instOmegaCompletePartialOrder.{u2} (Submonoid.{u2} A (MulZeroOneClass.toMulOneClass.{u2} A (NonAssocSemiring.toMulZeroOneClass.{u2} A (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1)))))) (Submonoid.instCompleteLatticeSubmonoid.{u2} A (MulZeroOneClass.toMulOneClass.{u2} A (NonAssocSemiring.toMulZeroOneClass.{u2} A (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1)))))))))) S (Ideal.primeCompl.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1) (Valuation.supp.{u2, u3} A Γ _inst_1 (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2) v) (Valuation.instIsPrimeToSemiringToCommSemiringSupp.{u2, u3} A Γ _inst_1 (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2) v (LinearOrderedCommGroupWithZero.toNontrivial.{u3} Γ _inst_2) (GroupWithZero.noZeroDivisors.{u3} Γ (CommGroupWithZero.toGroupWithZero.{u3} Γ (LinearOrderedCommGroupWithZero.toCommGroupWithZero.{u3} Γ _inst_2)))))) (B : Type.{u1}) [_inst_3 : CommRing.{u1} B] [_inst_4 : Algebra.{u2, u1} A B (CommRing.toCommSemiring.{u2} A _inst_1) (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3))] [_inst_5 : IsLocalization.{u2, u1} A (CommRing.toCommSemiring.{u2} A _inst_1) S B (CommRing.toCommSemiring.{u1} B _inst_3) _inst_4] (a : A), Eq.{succ u3} ((fun (x._@.Mathlib.Algebra.Hom.Group._hyg.2397 : B) => Γ) (FunLike.coe.{max (succ u2) (succ u1), succ u2, succ u1} (RingHom.{u2, u1} A B (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1))) (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3)))) A (fun (a : A) => (fun (x._@.Mathlib.Algebra.Hom.Group._hyg.2397 : A) => B) a) (MulHomClass.toFunLike.{max u2 u1, u2, u1} (RingHom.{u2, u1} A B (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1))) (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3)))) A B (NonUnitalNonAssocSemiring.toMul.{u2} A (NonAssocSemiring.toNonUnitalNonAssocSemiring.{u2} A (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1))))) (NonUnitalNonAssocSemiring.toMul.{u1} B (NonAssocSemiring.toNonUnitalNonAssocSemiring.{u1} B (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3))))) (NonUnitalRingHomClass.toMulHomClass.{max u2 u1, u2, u1} (RingHom.{u2, u1} A B (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1))) (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3)))) A B (NonAssocSemiring.toNonUnitalNonAssocSemiring.{u2} A (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1)))) (NonAssocSemiring.toNonUnitalNonAssocSemiring.{u1} B (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3)))) (RingHomClass.toNonUnitalRingHomClass.{max u2 u1, u2, u1} (RingHom.{u2, u1} A B (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1))) (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3)))) A B (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1))) (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3))) (RingHom.instRingHomClassRingHom.{u2, u1} A B (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1))) (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3))))))) (algebraMap.{u2, u1} A B (CommRing.toCommSemiring.{u2} A _inst_1) (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3)) _inst_4) a)) (FunLike.coe.{max (succ u3) (succ u1), succ u1, succ u3} (Valuation.{u1, u3} B Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2) (CommRing.toRing.{u1} B _inst_3)) B (fun (_x : B) => (fun (x._@.Mathlib.Algebra.Hom.Group._hyg.2397 : B) => Γ) _x) (MulHomClass.toFunLike.{max u3 u1, u1, u3} (Valuation.{u1, u3} B Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2) (CommRing.toRing.{u1} B _inst_3)) B Γ (MulOneClass.toMul.{u1} B (MulZeroOneClass.toMulOneClass.{u1} B (NonAssocSemiring.toMulZeroOneClass.{u1} B (Semiring.toNonAssocSemiring.{u1} B (Ring.toSemiring.{u1} B (CommRing.toRing.{u1} B _inst_3)))))) (MulOneClass.toMul.{u3} Γ (MulZeroOneClass.toMulOneClass.{u3} Γ (MonoidWithZero.toMulZeroOneClass.{u3} Γ (CommMonoidWithZero.toMonoidWithZero.{u3} Γ (LinearOrderedCommMonoidWithZero.toCommMonoidWithZero.{u3} Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2)))))) (MonoidHomClass.toMulHomClass.{max u3 u1, u1, u3} (Valuation.{u1, u3} B Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2) (CommRing.toRing.{u1} B _inst_3)) B Γ (MulZeroOneClass.toMulOneClass.{u1} B (NonAssocSemiring.toMulZeroOneClass.{u1} B (Semiring.toNonAssocSemiring.{u1} B (Ring.toSemiring.{u1} B (CommRing.toRing.{u1} B _inst_3))))) (MulZeroOneClass.toMulOneClass.{u3} Γ (MonoidWithZero.toMulZeroOneClass.{u3} Γ (CommMonoidWithZero.toMonoidWithZero.{u3} Γ (LinearOrderedCommMonoidWithZero.toCommMonoidWithZero.{u3} Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2))))) (MonoidWithZeroHomClass.toMonoidHomClass.{max u3 u1, u1, u3} (Valuation.{u1, u3} B Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2) (CommRing.toRing.{u1} B _inst_3)) B Γ (NonAssocSemiring.toMulZeroOneClass.{u1} B (Semiring.toNonAssocSemiring.{u1} B (Ring.toSemiring.{u1} B (CommRing.toRing.{u1} B _inst_3)))) (MonoidWithZero.toMulZeroOneClass.{u3} Γ (CommMonoidWithZero.toMonoidWithZero.{u3} Γ (LinearOrderedCommMonoidWithZero.toCommMonoidWithZero.{u3} Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2)))) (ValuationClass.toMonoidWithZeroHomClass.{max u3 u1, u1, u3} (Valuation.{u1, u3} B Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2) (CommRing.toRing.{u1} B _inst_3)) B Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2) (CommRing.toRing.{u1} B _inst_3) (Valuation.instValuationClassValuation.{u1, u3} B Γ (CommRing.toRing.{u1} B _inst_3) (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2)))))) (Valuation.extendToLocalization.{u2, u3, u1} A _inst_1 Γ _inst_2 v S hS B _inst_3 _inst_4 _inst_5) (FunLike.coe.{max (succ u2) (succ u1), succ u2, succ u1} (RingHom.{u2, u1} A B (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1))) (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3)))) A (fun (_x : A) => (fun (x._@.Mathlib.Algebra.Hom.Group._hyg.2397 : A) => B) _x) (MulHomClass.toFunLike.{max u2 u1, u2, u1} (RingHom.{u2, u1} A B (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1))) (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3)))) A B (NonUnitalNonAssocSemiring.toMul.{u2} A (NonAssocSemiring.toNonUnitalNonAssocSemiring.{u2} A (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1))))) (NonUnitalNonAssocSemiring.toMul.{u1} B (NonAssocSemiring.toNonUnitalNonAssocSemiring.{u1} B (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3))))) (NonUnitalRingHomClass.toMulHomClass.{max u2 u1, u2, u1} (RingHom.{u2, u1} A B (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1))) (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3)))) A B (NonAssocSemiring.toNonUnitalNonAssocSemiring.{u2} A (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1)))) (NonAssocSemiring.toNonUnitalNonAssocSemiring.{u1} B (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3)))) (RingHomClass.toNonUnitalRingHomClass.{max u2 u1, u2, u1} (RingHom.{u2, u1} A B (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1))) (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3)))) A B (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1))) (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3))) (RingHom.instRingHomClassRingHom.{u2, u1} A B (Semiring.toNonAssocSemiring.{u2} A (CommSemiring.toSemiring.{u2} A (CommRing.toCommSemiring.{u2} A _inst_1))) (Semiring.toNonAssocSemiring.{u1} B (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3))))))) (algebraMap.{u2, u1} A B (CommRing.toCommSemiring.{u2} A _inst_1) (CommSemiring.toSemiring.{u1} B (CommRing.toCommSemiring.{u1} B _inst_3)) _inst_4) a)) (FunLike.coe.{max (succ u2) (succ u3), succ u2, succ u3} (Valuation.{u2, u3} A Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2) (CommRing.toRing.{u2} A _inst_1)) A (fun (_x : A) => (fun (x._@.Mathlib.Algebra.Hom.Group._hyg.2397 : A) => Γ) _x) (MulHomClass.toFunLike.{max u2 u3, u2, u3} (Valuation.{u2, u3} A Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2) (CommRing.toRing.{u2} A _inst_1)) A Γ (MulOneClass.toMul.{u2} A (MulZeroOneClass.toMulOneClass.{u2} A (NonAssocSemiring.toMulZeroOneClass.{u2} A (Semiring.toNonAssocSemiring.{u2} A (Ring.toSemiring.{u2} A (CommRing.toRing.{u2} A _inst_1)))))) (MulOneClass.toMul.{u3} Γ (MulZeroOneClass.toMulOneClass.{u3} Γ (MonoidWithZero.toMulZeroOneClass.{u3} Γ (CommMonoidWithZero.toMonoidWithZero.{u3} Γ (LinearOrderedCommMonoidWithZero.toCommMonoidWithZero.{u3} Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2)))))) (MonoidHomClass.toMulHomClass.{max u2 u3, u2, u3} (Valuation.{u2, u3} A Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2) (CommRing.toRing.{u2} A _inst_1)) A Γ (MulZeroOneClass.toMulOneClass.{u2} A (NonAssocSemiring.toMulZeroOneClass.{u2} A (Semiring.toNonAssocSemiring.{u2} A (Ring.toSemiring.{u2} A (CommRing.toRing.{u2} A _inst_1))))) (MulZeroOneClass.toMulOneClass.{u3} Γ (MonoidWithZero.toMulZeroOneClass.{u3} Γ (CommMonoidWithZero.toMonoidWithZero.{u3} Γ (LinearOrderedCommMonoidWithZero.toCommMonoidWithZero.{u3} Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2))))) (MonoidWithZeroHomClass.toMonoidHomClass.{max u2 u3, u2, u3} (Valuation.{u2, u3} A Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2) (CommRing.toRing.{u2} A _inst_1)) A Γ (NonAssocSemiring.toMulZeroOneClass.{u2} A (Semiring.toNonAssocSemiring.{u2} A (Ring.toSemiring.{u2} A (CommRing.toRing.{u2} A _inst_1)))) (MonoidWithZero.toMulZeroOneClass.{u3} Γ (CommMonoidWithZero.toMonoidWithZero.{u3} Γ (LinearOrderedCommMonoidWithZero.toCommMonoidWithZero.{u3} Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2)))) (ValuationClass.toMonoidWithZeroHomClass.{max u2 u3, u2, u3} (Valuation.{u2, u3} A Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2) (CommRing.toRing.{u2} A _inst_1)) A Γ (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2) (CommRing.toRing.{u2} A _inst_1) (Valuation.instValuationClassValuation.{u2, u3} A Γ (CommRing.toRing.{u2} A _inst_1) (LinearOrderedCommGroupWithZero.toLinearOrderedCommMonoidWithZero.{u3} Γ _inst_2)))))) v a)
Case conversion may be inaccurate. Consider using '#align valuation.extend_to_localization_apply_map_apply Valuation.extendToLocalization_apply_map_applyₓ'. -/
@[simp]
theorem Valuation.extendToLocalization_apply_map_apply (a : A) :
    v.extendToLocalization hS B (algebraMap A B a) = v a :=
  Submonoid.LocalizationMap.lift_eq _ _ a
#align valuation.extend_to_localization_apply_map_apply Valuation.extendToLocalization_apply_map_apply

